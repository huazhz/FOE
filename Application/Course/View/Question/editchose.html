<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>更新选择题 | 教师管理后台 </title>

    <link href="__THEME__/Inspinia/css/bootstrap.min.css" rel="stylesheet">
    <link href="__THEME__/Inspinia/css/font-awesome.min.css" rel="stylesheet">
 
    <link href="__THEME__/Inspinia/css/animate.css" rel="stylesheet">
    <link href="__THEME__/Inspinia/css/style.css" rel="stylesheet">
 
 
 
    

</head>

<body>

    <div id="wrapper">
        <!--navbar-static-side start-->
         <include file="Application/Course/View/Navbar/left.html" />
		    <!--navbar-static-side end-->
    

        <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom">
         	 <!--navbar-static-top start-->
         	 <include file="Application/Course/View/Navbar/top.html" />
			    <!--navbar-static-top end-->
        </div>
            <div class="row wrapper border-bottom white-bg page-heading">
                <div class="col-lg-10">
                    <h2>编辑选择题</h2>
                    <ol class="breadcrumb">
                        <li>
                            <a href="index.html">Course</a>
                        </li>
                        <li>
                            <a>Question</a>
                        </li>
                        <li class="active">
                            <strong>Edit</strong>
                        </li>
                    </ol>
                </div>
                <div class="col-lg-2">

                </div>
            </div>
        <div class="wrapper wrapper-content animated fadeInRight">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>题目信息</h5>
                            <div class="ibox-tools">
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                    <i class="fa fa-wrench"></i>
                                </a>
                                <ul class="dropdown-menu dropdown-user">
                                    <li><a href="#">Config option 1</a>
                                    </li>
                                    <li><a href="#">Config option 2</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="ibox-content">
                            <form method="post" action="{:U('Course/Question/edit',array('type'=>'chose','qid'=>$question['id'] ) ) }" class="form-horizontal" >
                                 
                                
                                <div class="form-group"><label class="col-md-2 control-label">所属课程</label>
                                	
                                    <div class="col-md-10">
                                    	<select class="form-control m-b" name="course_id">
	                                    	<option value="0">请选择课程</option>
	                                			<volist name='course' id='vol'>
	                                				<option value="{$vol.id}">{$vol.title}</option>
	                                			</volist>
                                   	  </select>
                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>
                                <div class="form-group"><label class="col-md-2 control-label">题干内容</label>
                                	  <div class="col-md-10"><textarea id="stem"  name="stem">{$question['stem']|htmlspecialchars_decode=###}</textarea></div>
                                </div>
                                
                                <div class="hr-line-dashed"></div>
                                <!----选项---->
                                <volist name="question['metas']" id="meta">
                                	<div class="form-group"><label class="col-md-2 control-label">选项A <br/><br/><br/><i class="fa fa-trash-o btn btn-primary" onclick="del_meta(this)"></i></label>
	                                	  <div class="col-md-10"><textarea id="metas-{$i-1}" metaid="{$i-1}" name="metas[]" > {$meta|htmlspecialchars_decode=###} </textarea></div>
	                                </div>  
                                </volist>

                                
                                 
                                <div class="form-group"><label class="col-md-2 control-label">新增选项</label>
                                	  <div class="col-md-10"><button type="button" class="btn btn-primary" onclick="add_meta(this)" >新增选项</button></div>
                                </div>
                                
                                
                                <div class="hr-line-dashed"></div>
                                <div class="form-group"><label class="col-md-2 control-label">题目解析</label>
                                	  <div class="col-md-10"><textarea id="analysis" name="analysis">{$question['analysis']|htmlspecialchars_decode=### }</textarea></div>
                                	  <span class="col-md-12 col-md-offset-2" style="color:green;">
                                	  	 可空,若填则可帮助学生理解
                                	  </span>
                                </div>
                                
                                <div class="hr-line-dashed"></div>
                                <div class="form-group"><label class="col-md-2 control-label">正确选项</label>
                                	  <div class="col-md-10"><input class="form-control" type="text" name="answer" value="{$question['answer']}" /></div>
                                </div>
                                
                                <div class="hr-line-dashed"></div>
                                <div class="form-group"><label class="col-md-2 control-label">难易程度</label>
                                	  <div class="col-md-10">
                                	  	<input   type="radio" name="difficulty" value="easy"   />容易
                                	  	<input   type="radio" name="difficulty" value="normal" />中等
                                	  	<input   type="radio" name="difficulty" value="hard" />困难
                                	  </div>
                                </div>
                                <div class="hr-line-dashed"></div>
                                <div class="form-group"><label class="col-md-2 control-label">备注</label>
                                      <div class="col-md-10">
                                        <input class="form-control"  type="text" name="remarks" value="{$question['remarks']}" placeholder="例如：C语言期末考试A卷第5题" />
                                        <span  class="help-block">方便您区分题目 选填</span>
                                      </div>
                                </div>
                                
                                
                                
           
                                <div class="hr-line-dashed"></div>
                                <div class="form-group">
                                    <div class="col-md-12 col-md-offset-10">
                                    		<button class="btn btn-primary" type="submit">更新</button>
                                                                               
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
   

        </div>
        </div>


    <!-- Mainly scripts -->
    <script src="__THEME__/Inspinia/js/jquery-2.1.1.js"></script>
    <script src="__THEME__/Inspinia/js/bootstrap.min.js"></script>
    <script src="__THEME__/Inspinia/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="__THEME__/Inspinia/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="__THEME__/Inspinia/js/inspinia.js"></script>
    <script src="__THEME__/Inspinia/js/plugins/pace/pace.min.js"></script>
    
    <!--ckeditor  -->
    <script src="__PLUGIN__/ckeditor/ckeditor.js"></script>
    
    <!--my index js  -->
    <script src="__THEME__/Inspinia/js/index.js"></script>
    
    <script>
   
	     
	     //删除选项
	     function del_meta(obj){
	     	
	     	
	     	if( $("textarea[name ^='metas']").length < 3 ){
	     		alert("不能少于两个选项");return false;
	     	}
	     	
	     	$(obj).parent().parent().remove();
	     	//$(obj).parent().parent().prev().remove();
	     	
	     	var metas =$("textarea[name ^='metas']");
	     	$num = metas.length;
	     	
	     	metas.each(function(index,element){
	     		 
	     		$(this).attr('id',"metas-"+index);
	     		$(this).attr('name',"metas["+index+"]");
	     		$char = chartonum(index);
	     		$(this).parent().parent().children().first().html("选项"+$char+ "<br/><br/><br/><i class='fa fa-trash-o btn btn-primary' onclick='del_meta(this)'></i>");
	     	});
 
	     }
	     
	     
	     //添加选项
	     function add_meta(obj){
	     	if( $("textarea[name ^='metas']").length > 7 ){
	     		alert("选项太多了吧");return false;
	     	}
	     	var metas =$("textarea[name ^='metas']");
	     	$num = metas.length;
	     	$char = chartonum($num);
	     	
	     	 
	     	$cont=$('<div></div>');
	     	$cont.addClass('form-group');
	     	
	     	$cont_label=$('<label></label>');
	     	$cont_label.addClass('col-md-2 control-label');
	     	$cont_label.text("选项"+$char);
	     	
	     	$cont_label_i=$('<i></i>');
	     	$cont_label_i.addClass('fa fa-trash-o btn btn-primary');
	     	$cont_label_i.attr('onclick','del_meta(this)');
	     	
	     	$cont_div = $('<div></div>');
	     	$cont_div.addClass('col-md-10');
	     	
	     	$cont_div_text=$('<textarea></textarea>');
	     	$cont_div_text.attr('name',"metas["+$num+"]");
	     	$cont_div_text.attr('id',"metas-"+$num);
	     	
	     	$cont_label.append("<br/><br/><br/>",$cont_label_i);
	     	$cont_div.append($cont_div_text);
	     	$cont.append($cont_label,$cont_div);


	     	$(obj).parent().parent().before($cont);
	     	
	     	CKEDITOR.replace("metas-"+$num,{ height:'80px'});
	     }
	     
	     
	     
	     
	     
	     
	     
	     
	     
    </script>
    
    
    <script>
    	$(document).ready(function(){
    	
    		//初始化选项
    		CKEDITOR.replace('stem'); 
	      CKEDITOR.replace('analysis');
    		var metas = $("textarea[name ^='metas']");
    		for($i=0; $i < metas.length ; $i++){
    			CKEDITOR.replace("metas-" + $i ,{ height:'80px'  }); //初始化ckeditor 选择题选项 
    			var metaid = metas.eq($i).attr('metaid');
    			var metachar ='';
    			switch(metaid){
			 			case '0':
			 				metachar ='A';
			 			break;
			 			case '1':
			 				metachar ='B';
			 			break;	
			 			case '2':
			 				metachar ='C';
			 			break;
			 			case '3':
			 				metachar ='D';
			 			break;
			 			case '4':
			 				metachar ='E';
			 			break;
			 			case '5':
			 				metachar ='F';
			 			break;
			 			case '6':
			 				metachar ='G';
			 			break;
			 		}
    			metas.eq($i).parent().parent().children().first().html("选项"+ metachar + "<br/><br/><br/><i class='fa fa-trash-o btn btn-primary' onclick='del_meta(this)'></i>");
    		}
    		
    		//初始化select option radio
    		var courseid = "{$question['course_id']}";
    		$("select option[value='" + courseid + "']").attr("selected", "selected");
    		var difficulty = "{$question['difficulty']}";
    		$(":radio[value='" + difficulty + "']").attr("checked","checked");
    			
    	});
    </script>
 
   
 
 
 
</body>

</html>
